#!/usr/bin/env zsh

LANGUAGES=$(echo "golang lua rust typescript nodejs python" | tr ' ' '\n')
CORE_UTILS=$(echo "xargs find mv sed awk" | tr ' ' '\n')

SELECTED=$(printf "$LANGUAGES\n$CORE_UTILS\n" | fzf)

read "QUERY?query: "

if printf $LANGUAGES | grep -qs $SELECTED; then
    tmux new-window "curl cht.sh/$SELECTED/$(echo $QUERY | tr ' ' '+') & while [ : ]; do sleep 1; done"
else 
    tmux new-window "curl cht.sh/$SELECTED~$QUERY & while [ : ]; do sleep 1; done"
fi
